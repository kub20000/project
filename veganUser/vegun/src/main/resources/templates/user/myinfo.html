<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 정보 수정</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body class="myInfo">
<header>
    <h1>Vegan delight</h1>
    <!-- 메인 내비게이션 -->
    <nav id="mainNav">
        <a th:href="@{/user/myinfo}">내 정보 수정</a>
        <a href="mymovies.html">최근 본 영상</a>
        <a th:href="@{/user/delete}">회원탈퇴</a>
    </nav>
</header>

<main>
    <form id="fixInfo" th:action="@{/user/myinfo}" method="post">
        <div>
            <label for="fixName">성명</label>
            <input class="fixInfo" type="text" id="fixName" name="name"
                   th:value="${user != null} ? ${user.name} : ''" placeholder="이름을 입력하세요" required>

            <label for="nickName">닉네임</label>
            <input class="fixInfo" type="text" id="nickName" name="nickname"
                   th:value="${user != null} ? ${user.nickname} : ''" placeholder="닉네임을 입력하세요" required>

            <label for="newPassward">비밀번호</label>
            <input class="fixInfo" type="password" id="newPassward" name="password"
                   placeholder="비밀번호를 입력하세요" required>
            <button type="button" id="changePwBtn">비밀번호 변경</button>

            <label for="bthInfo">생년월일</label>
            <input class="fixInfo" type="date" id="bthInfo" name="birthdate"
                   th:value="${user != null} ? ${user.birthdate} : ''" required>

            <label for="phoneNum">휴대전화 번호</label>
            <input class="fixInfo" type="tel" id="phoneNum" name="phone"
                   th:value="${user != null} ? ${user.phone} : ''" placeholder="010-1234-5678" required>

            <label for="emailInfo">이메일 정보</label>
            <input class="fixInfo" type="email" id="emailInfo" name="email"
                   th:value="${user != null} ? ${user.email} : ''" placeholder="example@email.com" required>

            <button type="submit">정보 수정</button>
        </div>
        <!-- 성공 메시지 -->
        <div th:if="${success}" style="color: green; margin-bottom: 10px;">
            <p th:text="${success}"></p>
        </div>

        <!-- 에러 메시지 -->
        <div th:if="${error}" style="color: red; margin-bottom: 10px;">
            <p th:text="${error}"></p>
        </div>
    </form>
</main>

<script>
    document.getElementById('changePwBtn').addEventListener('click', () => {
        window.location.href = '/user/changePw';
    });
</script>
</body>
</html>